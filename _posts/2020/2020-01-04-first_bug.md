---
layout: post
categories: Java
title: 2020 å¹´çš„ç¬¬ä¸€å¤©ï¼Œç¨‹åºå‘˜é¸­è¡€ç²‰ä¸åˆç¢°ä¸Šç”Ÿäº§äº‹æ•…
tagline: by å°é»‘
tags: 
  - å°é»‘
---

hello~å„ä½è¯»è€…æ–°å¹´å¥½ï¼Œæˆ‘æ˜¯é¸­è¡€ç²‰ä¸ï¼ˆå¤§å®¶å¯ä»¥ç§°å‘¼æˆ‘ä¸ºã€Œé˜¿ç²‰ã€ï¼‰ï¼Œä¸€ä½å–œæ¬¢åƒé¸­è¡€ç²‰ä¸çš„ç¨‹åºå‘˜ï¼2019 å¹´ï¼Œé˜¿ç²‰å†™äº†å¾ˆå¤š bugï¼Œè¿™ä¸å‰ä¸€æ®µæ—¶é—´ `OOM` å·®ç‚¹å°±æŠŠæœåŠ¡å™¨ææŒ‚ã€‚è·¨å¹´çš„æ—¶åˆ»ï¼Œé˜¿ç²‰é»˜é»˜ç«‹ä¸‹ä¸€ä¸ª flagï¼Œ2020 å¹´å†è§ bugã€‚

![](http://www.justdojava.com/assets/images/2019/java/image_andyxh/20200104/006tNbRwly1gakaggfkxxj308c07cdfs.jpg)

å¯æ˜¯æ²¡æƒ³åˆ°è¿˜æ²¡è¿‡å‡ ä¸ªå°æ—¶ï¼Œåˆšç«‹çš„ falg å°±å€’ä¸‹äº†ï¼Œé˜¿ç²‰å¤ªéš¾äº†ğŸ˜­ã€‚ã€‚ã€‚ã€‚

## äº‹ä»¶å›é¡¾

æ–°å¹´ç¬¬ä¸€å¤©ï¼Œè¿è¥åé¦ˆå•†æˆ·æ”¶åˆ°å¯¹è´¦æ–‡ä»¶æœ‰é—®é¢˜ã€‚åˆšæ¥åˆ°ç”µè¯æ—¶ï¼Œé˜¿ç²‰æ˜¯ä¸€ä¸‡ä¸ªä¸ç›¸ä¿¡ï¼Œè¿™ä¸ªä»£ç éƒ½è·‘äº†è¿™ä¹ˆä¹…ï¼Œæ€ä¹ˆå°±ååä»Šå¤©ä¸å¯¹äº†ã€‚å¯èƒ½çœ‹åˆ°é˜¿ç²‰ä¸ä¿¡ï¼Œè¿è¥å°å§å§éšå³å‘äº†ä¸€å¼ å•†æˆ·ç»™çš„è´¦å•æˆªå›¾ã€‚

![](http://www.justdojava.com/assets/images/2019/java/image_andyxh/20200104/006tNbRwly1gakb538puoj323c0523zw.jpg)

wahtï¼Ÿï¼Ÿï¼Ÿ2020 å¹´æ‰åˆšæ¥ï¼Œæ—¶é—´æ€ä¹ˆå˜æˆ 20201231 äº†ã€‚ã€‚ã€‚

![](http://www.justdojava.com/assets/images/2019/java/image_andyxh/20200104/006tNbRwly1gakwswrfjoj307307374e.jpg)

å“ï¼Œé˜¿ç²‰åªå¥½å…ˆè®©è¿è¥ç¨³ä½å•†æˆ·ï¼Œç„¶åèµ¶ç´§èµ·æ¥ï¼Œæ‰“å¼€äº†ç”µè„‘ï¼Œé¦–å…ˆå®šä½ä¸€ä¸‹é—®é¢˜ã€‚

## é—®é¢˜æ’æŸ¥

ç”Ÿæˆè´¦å•ä¼ªä»£ç å¦‚ä¸‹ï¼š

![](http://www.justdojava.com/assets/images/2019/java/image_andyxh/20200104/006tNbRwly1gakbmuq28bj31au0nq0x8.jpg)

ä¸Šé¢ä»£ç é€»è¾‘å…¶å®éå¸¸ç®€å•ï¼Œå°†è´¦å•æ•°æ®ä»æ•°æ®åº“å–å‡ºï¼Œç„¶åæŒ‰ç…§æŒ‰ç…§ç›¸åº”çš„æ ¼å¼ç»„è£…æ•°ç»„ï¼Œå†™å…¥æ–‡ä»¶ã€‚

é˜¿ç²‰èµ°æŸ¥äº†å‡ éä»£ç ï¼Œè¶Šçœ‹è¶Šè§‰å¾—æ²¡é—®é¢˜å•Šï¼Œè¿™ä¹ˆç®€å•çš„é—®é¢˜æ²¡å¯èƒ½å‡ºç°é—®é¢˜å‘€ã€‚æ²¡åŠæ³•ï¼Œåªå¥½è¯·æ•™ä¸€ä¸‹é˜¿ç²‰çš„å¥½æœ‹å‹å…¼åŒäº‹å°é»‘ã€‚

å¾ˆå¿«å°é»‘å°±ç»™é˜¿ç²‰æŒ‡å‡º `YYYY/MM/dd HH:mm` æ ¼å¼ä¸å¯¹ï¼Œéœ€è¦ä½¿ç”¨ `yyyy/MM/dd HH:mm`ã€‚é˜¿ç²‰ä¿®æ”¹ä¹‹åï¼Œé‡æ–°ç”Ÿæˆå¯¹è´¦å•ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜ã€‚

## åŸå› åˆ†æ

è™½ç„¶è§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯é˜¿ç²‰å…¶å®è¿˜æ˜¯ä¸€çŸ¥åŠè§£ï¼Œæ‰€å¹¸å…ƒæ—¦ä¹Ÿæ²¡ä»€ä¹ˆäº‹ï¼Œé˜¿ç²‰å°±æ·±å…¥ç ”ç©¶ä¸€ä¸‹ `YYYY` æ ¼å¼ã€‚åŸæ¥ `Java` ä¸­`YYYY` ä¸ `yyyy` åˆ†åˆ«ä»£è¡¨ä¸¤ç§ä¸åŒæ ¼å¼ã€‚

![](http://www.justdojava.com/assets/images/2019/java/image_andyxh/20200104/006tNbRwly1gakia8egv8j31250u0wy2.jpg)

`Y` ä»£è¡¨ `Week Year`ï¼Œè¡¨ç¤ºå½“å¤©å‘¨æ‰€åœ¨çš„å¹´ä»½ã€‚è¿™ç§æ–¹å¼å°†ä¼šæŠŠä¸€å¹´åˆ’åˆ†æˆ52 å‘¨/53å‘¨ï¼ˆç±»ä¼¼äºé—°å¹´çš„æ¦‚å¿µï¼Œæ¯éš”å‡ å¹´å°†ä¼šå¢åŠ ä¸€å‘¨ï¼‰ã€‚`Week Year`ä¸‹æ¯å‘¨ä»…å±äºæŸä¸€å¹´ï¼Œå¦‚æœæŸå¹´çš„ç¬¬ä¸€å‘¨æˆ–æœ€åä¸€å‘¨è·¨å¹´ï¼Œå°±ä¼šå¯¼è‡´éƒ¨åˆ†æ—¥æœŸå¹´ä»½ä¸å®é™…ä¸ç¬¦ã€‚

`Week Year` å­˜åœ¨ä¸¤ç§æ ‡å‡†ï¼š

- ISO 8601ï¼šå›½é™…æ ‡å‡†ï¼Œæ¯å‘¨ä»**å‘¨ä¸€**å¼€å§‹ï¼Œæ¯å¹´çš„ç¬¬ä¸€å‘¨è‡³å°‘åŒ…å« 4 å¤©
- Commonï¼šé€šç”¨æ ‡å‡†ï¼Œæ¯å‘¨ä»**å‘¨æ—¥**å¼€å§‹ï¼Œæ¯å¹´çš„ç¬¬ä¸€å‘¨è‡³å°‘åŒ…å« 1 å¤©

> Calendar å¯¹è±¡å¯ä»¥é€šè¿‡ setFirstDayOfWeek ä¸ setMinimalDaysInFirstWeek æ”¹å˜ä¸Šé¢é»˜è®¤æ ‡å‡†

Java å°†ä¼šæ ¹æ®ç³»ç»Ÿç¯å¢ƒå˜é‡å†³å®šä½¿ç”¨å“ªç§æ ‡å‡†ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® **Locale** æ”¹å˜æ–¹å¼ã€‚ä»£ç å¦‚ä¸‹ï¼š

```java
// é€‰æ‹© 20191229 è¿™ä¸€å¤©
Date date20191229 = DateUtils.parseDate("20191229", "yyyyMMdd");
// å°†ä¼šè¾“å‡º 2020ï¼Œä½¿ç”¨ Common ã€‚å½“å‰ç³»ç»Ÿï¼ŒLocale é»˜è®¤å€¼ä¸º Locale.CHINA
System.out.println(DateFormatUtils.format(date20191229,"YYYY"));
// å°†ä¼šè¾“å‡º 2019ï¼Œä½¿ç”¨ ISO 8601
System.out.println(DateFormatUtils.format(date20191229,"YYYY", Locale.FRANCE));
```

ä¸‹é¢ä¾‹å­æˆ‘ä»¬ä½¿ç”¨ **ISO 8601** æ ‡å‡†ï¼Œåˆ†åˆ«çœ‹ä¸€ä¸‹æœ€åä¸€å‘¨è·¨å¹´ä»¥åŠç¬¬ä¸€å‘¨è·¨å¹´çš„ä¾‹å­ã€‚

2015 å¹´æœ€åä¸€å‘¨è·¨å¹´ï¼Œ2016 å‰ä¸‰å¤©ä½¿ç”¨ `YYYY` æœ€åç»“æœä¸º 2015ï¼Œæ—¶é—´çœ‹èµ·æ¥è¢«å›é€€äº†ã€‚

![](http://www.justdojava.com/assets/images/2019/java/image_andyxh/20200104/006tNbRwly1gakxep4glsj309q0b6myb.jpg)

2020 å¹´ç¬¬ä¸€å‘¨è·¨å¹´ï¼Œ2019 å¹´æœ€åä¸¤å¤©ä½¿ç”¨ `YYYY` ç»“æœä¸º 2020ã€‚

![](http://www.justdojava.com/assets/images/2019/java/image_andyxh/20200104/006tNbRwly1gakxk6q7ptj309i0bodh2.jpg)

## å…¶ä»–åˆ†æ

ç»ˆäºå¼„æ˜ç™½ `YYYY` ï¼Œé˜¿ç²‰é¡ºä¾¿ä¹Ÿå­¦ä¹ ä¸€ä¸‹å¸¸ç”¨çš„æ—¥æœŸæ ¼å¼ã€‚

ä¸‹é¢ä»¥ `2019-12-31 06:06:06:666` æ—¶é—´ä¸ºä¾‹

| Letter |     å«ä¹‰     | Example          |
| :----: | :----------: | ---------------- |
|   Y    |  Week Year   | YYYY---->2020    |
|   y    |      å¹´      | yyyy------>2019  |
|   M    |      æœˆ      | MM------->12     |
|   m    |      åˆ†      | mm-------->06    |
|   D    |  ä¸€å¹´ä¸­å¤©æ•°  | MM-------->365   |
|   d    | ä¸€æœˆä¸­çš„å¤©æ•° | dd--------->06   |
|   H    | å°æ—¶ï¼ˆ0-23ï¼‰ | HH--------->06   |
|   h    | å°æ—¶ï¼ˆ1-12ï¼‰ | hh---------->06  |
|   S    |     æ¯«ç§’     | SSS--------->666 |

## æŠ€æœ¯æ€»ç»“

ä¸‹é¢å¼€å§‹æœ¬ç¯‡æ–‡ç« çš„æŠ€æœ¯æ€»ç»“ï¼š

- ç¬¬ä¸€ï¼Œåˆ‡è®° `YYYY` ä¸ `yyyy`åŒºåˆ«ï¼Œå¹´ä»½æœ€å¥½ç»Ÿä¸€ä½¿ç”¨ `yyyy`
- ç¬¬äºŒï¼Œæ€•å¿˜è®°çš„å°ä¼™ä¼´å¯ä»¥å®‰è£…ä¸€ä¸‹é˜¿é‡Œçš„ **Alibaba Java Coding Guidelines** æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥æ£€æµ‹å‡ºä½¿ç”¨ `YYYY` çš„ä»£ç 
- ç¬¬ä¸‰ï¼Œé˜…è¯»å®Œæ•´æ–‡æ¡£ï¼Œæ¶ˆé™¤ Bug æœ€å¥½çš„çš„åŠæ³•å°±æ˜¯é˜…è¯»å®Œæ•´çš„æ–‡æ¡£ï¼Œå¥¥åˆ©ç»™
- ç¬¬å››ï¼Œæµ‹è¯•ç¯èŠ‚å¢åŠ è¾¹ç•Œæµ‹è¯•ï¼Œæ—©å‘ç°ï¼Œæ—©æ¶ˆç­

## éšä¾¿èŠèŠ

å†™è¿™ç¯‡çš„æ–‡ç« æ—¶å€™ï¼Œå‘ç°ç¤¾åŒºæœ‰äº›å°ä¼™ä¼´ä¹Ÿè¸©åˆ°è¿™ä¸ªå‘ï¼Œå“ˆå“ˆï¼Œå¾é“ä¸å­¤ä¹Ÿã€‚

2021ï¼Œ2022....é˜¿ç²‰ç›¸ä¿¡è¿˜ä¼šæœ‰æ–°çš„å°ä¼™ä¼´å°†ä¼šè¸©åˆ°è¿™ä¸ªå‘ï¼Œå“ˆå“ˆã€‚åœ¨è¿™é‡Œï¼Œé˜¿ç²‰ç»™æœªæ¥å°ä¼™ä¼´ç•™ä¸ªè¨€ï¼š

æœªæ¥çš„çš„å°ä¼™ä¼´ä½ å¥½ï¼Œå½“ä½ æœç´¢åˆ°è¿™ç¯‡æ–‡ç« å¹¶ä¸”çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘çŸ¥é“ä½ ä¹Ÿè¸©åˆ°å‘äº†ï¼Œå“ˆå“ˆï¼æ—¢ç„¶éƒ½çœ‹åˆ°è¿™é‡Œäº†ï¼Œåˆ«å¿˜è®°ç‚¹ä¸ªèµå“¦ï¼

![img](http://www.justdojava.com/assets/images/2019/java/image_andyxh/20200104/006tNbRwly1gakwlcu3z2j30730733yi.jpg)



## å¸®åŠ©

1. [week_year](https://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html#week_year)

2. [Serious Security: The decade-ending â€œY2K bugâ€ that wasnâ€™t](https://nakedsecurity.sophos.com/2019/12/23/serious-security-the-decade-ending-y2k-bug-that-wasnt/)

3. [ISO week date_wiki](https://en.wikipedia.org/wiki/ISO_week_date)

4. [Difference between year-of-era and week-based-year?](https://stackoverflow.com/questions/26431882/difference-between-year-of-era-and-week-based-year)

