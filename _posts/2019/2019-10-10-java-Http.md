---
layout: post
title:  重温HTTP，你到底做了什么？
tagline: by 懿
categories: HTTP
tags: 
    - 懿
---

之前在回忆面试题的时候，面试官曾经问过我关于网络协议的一些东西，回答的当时感觉自己很垃圾，然后面试结束之后，自行百度，翻阅书籍，然后做了细致的整理，现在我就来分享给大家。
<!--more-->

## HTTP你到底是个什么鬼

HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于从万维网服务器传输超文本到本地浏览器的传送协议。HTTP 是基于 TCP/IP 协议通信协议来传递数据（HTML 文件、图片文件、查询结果等）。它不涉及数据包（packet）传输，主要规定了客户端和服务器之间的通信格式，默认使用80端口。

这其实就是百度百科里面的精简化的内容，虽然说不上太细致，但是已经算是对HTTP做了一个大概的描述，我们接下来就从以下的几个方面来看一下这个HTTP吧。

### HTTP报文

一般的，用于HTTP协议交互的信息被称为HTTP报文，那么说到HTTP报文，我们做开发的，很多时候都理解成报文是由一行一行的简单字符串，确实也是，因为HTTP报文都是纯文本，所以，你就可以非常方便的进行读写。我们来看下图：

![](http://www.justdojava.com/assets/images/2019/java/image_yi/10_10/1.jpg)

上图显示的就是一个简单的HTTP事务的报文，图中分为了2部分，请求报文和响应报文。

**请求报文、响应报文**

从客户端发往服务器的报文叫请求报文，也叫做`request message` ,服务器在接收到请求报文之后，不得象征性的给人家返回点东西？礼尚往来嘛，这时候，服务器端相应一下，发给客户端一点东西，这就称之为相应报文。

报文分为了三个层级，也算是三个东西，起始行，首部，主体，这三个东西我们必须得知道他们到底是干啥的，这样被面试官问到之后，至少能说点东西出来。

**起始行**

图片中的起始行种，请求报文和响应报文的起始行是不一样的，【GET /test/hi-there.txt HTTP/1.0】,
- GET 服务器通过GET方法获取资源
- /test/hi-there.txt 这是资源get请求就是获取这个资源
- HTTP1.0 就是指定的是HTTP协议版本为1.0

响应报文的起始行主要是说明服务器的响应情况 【HTTP/1.0  200  OK】

同样的 HTTP1.0还是版本,而这个200表示的是状态码，OK相应状态没问题。

以上的就是起始行的所有内容介绍了，是不是很清晰很透彻了？那我们来看这个首部。

**首部**

大家有没有注意到首部都是键值对的形式存在的，就是都是key:value这种形式的，如下，

请求报文首部：
```
Accept:text/*
Accept-Language:en,fr
```

响应报文首部：
```
Content-Type:text/plain
Content-length:19
```

光这么看其实很没意思是吧，看了半天还得靠自己的英文才知道是啥意思，我给大家找来个关于各种首部字段的说明。

通用首部字段HTTP1.1

![](http://www.justdojava.com/assets/images/2019/java/image_yi/10_10/2.jpg)

请求首部字段:

![](http://www.justdojava.com/assets/images/2019/java/image_yi/10_10/3.jpg)

响应首部字段：

![](http://www.justdojava.com/assets/images/2019/java/image_yi/10_10/4.jpg)

实体首部字段：

![](http://www.justdojava.com/assets/images/2019/java/image_yi/10_10/5.jpg)

其实这么多首部字段，说白了就是一句话 **使用首部字段是为了给浏览器和服务器提供报文主体大小、所使用的语言、认证信息等内容。**

看就是这么简单，方便，关于怎么去使用，本文先不做讲解，不然这首部字段说起来，那就没尽头了，有兴趣的小伙伴不妨可以手动去搜索一下把！

**主体**

大家可以回去看一下图一，图一中响应报文的主体，`hi,I am message`,实体的主体和报文的主体是一个可选的数据块。与起始行和首部不同的是，主体中可包含文本或二进制数据，也可以为空如图1中的请求报文主体，Content-type行说明了主体是一个纯文本文档，Content-length说明了主体有19字节

其实有些人也会这么理解，Http报文包括请求报文和响应报文两大部分，其中请求报文由请求行（request line）、请求头（header）、空行和请求体四个部分组成。而响应报文由状态行、响应头部、空行和响应体四个部分组成。

给大家一幅图，这个是我之前从别的地方看来的，感觉和这句话很搭配。

![](http://www.justdojava.com/assets/images/2019/java/image_yi/10_10/6.jpg)

关于HTTP报文我们先告一段落，我们继续往下看！

### HTTP请求方式

开发人员都知道，请求方式最常用的就是GET和POST，但是实际上不止这两种，我之前竟然一点不知道，内心表示HTTP你还是我认识的HTTP么？

- GET：请求指定的页面信息，并返回实体主体。

- HEAD：类似于get请求，只不过返回的响应中没有具体的内容，用于获取报头。

- POST：向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。

- PUT：从客户端向服务器传送的数据取代指定的文档的内容。

- DELETE：请求服务器删除指定的页面。

后来当我看到之后，内心接受了，原来是这么回事，HTTP1.0定义了三种请求方法： GET, POST 和 HEAD方法。HTTP1.1新增了五种请求方法：OPTIONS, PUT, DELETE, TRACE 和 CONNECT 方法。

![](http://www.justdojava.com/assets/images/2019/java/image_yi/10_10/7.jpg)

关于HTTP请求就说这么多了，接下来就是HTTP状态码了，这三位数字描述了请求过程中所发生的情况。每个状态码的第一位数字用于描述状态的一般类型（“成功”、“出错”等）。

### HTTP状态码

给大家送上两个图，之前在刷面试的时候无意间看到的图，感觉特别的形象，帮助大家理解状态码有神奇的功效。

![](http://www.justdojava.com/assets/images/2019/java/image_yi/10_10/8.jpg)

- 301—永久移动。被请求的资源已被永久移动位置；
- 302—请求的资源现在临时从不同的 URI 响应请求；
- 305—使用代理。被请求的资源必须通过指定的代理才能被访问；
- 307—临时跳转。被请求的资源在临时从不同的URL响应请求；
- 400—错误请求；
- 402—需要付款。该状态码是为了将来可能的需求而预留的，用于一些数字货币或者是微支付；
- 403—禁止访问。服务器已经理解请求，但是拒绝执行它；
- 404—找不到对象。请求失败，资源不存在；
- 406—不可接受的。请求的资源的内容特性无法满足请求头中的条件，因而无法生成响应实体；

![](http://www.justdojava.com/assets/images/2019/java/image_yi/10_10/9.jpg)

- 408—请求超时；
- 409—冲突。由于和被请求的资源的当前状态之间存在冲突，请求无法完成；
- 410—遗失的。被请求的资源在服务器上已经不再可用，而且没有任何已知的转发地址；
- 413—响应实体太大。服务器拒绝处理当前请求，请求超过服务器所能处理和允许的最大值。
- 417—期望失败。在请求头 Expect 中指定的预期内容无法被服务器满足；
- 418—我是一个茶壶。超文本咖啡罐控制协议，但是并没有被实际的HTTP服务器实现；
- 420—方法失效。
- 422—不可处理的实体。请求格式正确，但是由于含有语义错误，无法响应；
- 500—服务器内部错误。服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理；

这个状态码的图是在网上找的，链接送上【http://www.sohu.com/a/278045231_120014184】

以上就是我想给大家介绍的HTTP，你到底是什么鬼，下一篇文章我将会给大家讲述HTTP1.0和HTTP1.1的那些事！敬请期待呦！

我是懿，一个正在被打击却努力前进的码农。


