---
layout: post
title: 并发程序设计有感
tagline: by 懿
categories: java并发
tags: 
    - 懿
---

之前写过一些锁的文章了，然后就莫名其妙的去看了并发程序设计这块的内容，然后发现了很多专业的名词之前的理解有稍微的偏差，这次
我们来彻底的理解一下吧！
<!--more-->

## 同步和异步

我们先看什么是同步和异步，在进行文字讲解之前，我先给大家看个手绘的图吧。

![](/assets/images/2019/java/image_yi/06-06/1.jpg)

看到这个的时候，有没有人明白了一些什么呢？

同步和异步通常是用来行用一次方法调用，同步方法调用一旦开始，调用者必须要等到方法调用返回之后，才能够继续后续的行为，不论行为是什么，
二异步的方法调用更像是一个消息的传递，一旦开始了，方法调用就会立即的返回，调用者就可以继续后续的操作。

而异步的方法通常会在另一个线程中更加“真实”的之行。

整个过程，不会阻塞调用者的工作，图中我们显示了同步方法调用和异步方法调用之间的区别，对于调用者来说，异步调用似乎是一个瞬间就
完成的。如果说异步调用需要返回结果，那么当这个异步调用真实完成的时候，就会通知调用者了。

我们可以想一个应用的场景，

加入说你陪着老婆去商场去买衣服，然后你老婆在商场看上了一件很漂亮的衣服，但是就剩一件了，还不太适合你老婆，这时候你老婆非要买，然后
售货员就得去货仓调货，然后你们就处于漫长的等待中，这种时候，就相当于是同步的调用，不是么？

但是现在相对来说网购是不是已经非常的方便了，假如你媳妇逛淘宝，忽然看到一个非常漂亮的衣服，那是不是该你表现一波了，
这时候，你去把商品添加到购物车，然后直接下单，只需要半天不到，你就能穷送那倒货物了，而在这时候你就可以有充足的时间再去干点别的事情，
比如，你可以看一篇简单的文章。

这就是同步调用和异步调用，是不是很形象呢？

说完了同步和异步了，我们再看看并发和并行

## 并发和并行

并发和并行是两个很容易被混淆的概念，他们都可以用来表示两个或者多个任务一起之行，但是偏重点有些不同，并发主要是说明多个任务之间交替执行，
而多个任务之间还有可能是串行的，而并行的真正意义上就是“同时进行”。

其实二者之前侧重点是不一样的

并发：侧重点是 交替做不同事情的能力

并行：侧重点是 同时做不同事情的能力

![](/assets/images/2019/java/image_yi/06-06/2.jpg)

之前看过一个例子，其实特别的好，大致意思是这样的，

并发：你吃饭吃到一半，电话来了，你停了下来接了电话，接完后继续吃饭，这说明你支持并发。

并行：你吃饭吃到一半，电话来了，你一边打电话一边吃饭，这说明你支持并行

而严格意义上说，并行的多个任务是真实的同时执行，而对于并发来说，这个过程只是交替的，一会是任务A，一会又是执行任务B，系统会不停的在
两者之间进行切换，但是对于外部观察者来说，即使多个任务之间是串行并发的，也会造成多任务见是并行执行的错觉。

实际上，如果系统内只有一个CPU的话，而是用多线程或者多线程任务，那么真实环境中这些任务是不可能真实并行的，毕竟一个CPU一次的话只能
执行一条指令，这种情况下多进程或者多线程就是并发的，而不是并行的（操作系统会不停的切换多个任务）。真实的并行也只可能出现在拥有多个CPU的系统中(比如多核CPU)


讲到并发，那么就得说一下阻塞和非阻塞。

## 阻塞(Blocking) 非阻塞（Non-Blocking）

阻塞和非阻塞通常用来形容多个线程之间的相互影响，比如一个线程占用临界区资源，那么其他所有的需要这个资源的线程就必须在这个临界区中进行等待，等待就会导致线程挂起，这种情况就是相当于阻塞。

此时，如果占用资源的线程一直不愿意释放资源，那么就会处在无限的等待中，在这等待的线程都没办法正常工作。

非阻塞的意思恰好和阻塞相反，它强调的是没有一耳光线程可以妨碍其他线程执行，所有的线程都在去尝试不断的去执行，

而关于怎么去解决并发，这个我之前也写过专门的文章去解读，有兴趣的小伙伴可以去搜索一下，锁

我在这里就阐述一下方式：

初级技巧-乐观锁

高级技巧 - 类ConcurrentHashMap

关于并发的程序设计，你是不是需要再加深一下自己的理解呢？


  
     




